from openai import OpenAI
from tqdm import tqdm
import pickle as pkl

kimi = {'api_key':"输入你的API_KEY",
        'base_url':"https://api.moonshot.cn/v1",
        'model' :"moonshot-v1-8k",}
chatgpt_3 = {'api_key':"输入你的API_KEY",
        'base_url':"https://35api.huinong.co/v1",
        'model':'gpt-3.5-turbo'}

class LLMsAPI:
    def __init__(self, api_config=None):
        if api_config == 'kimi':
            api_config = kimi
        elif api_config == 'chatgpt_3' or api_config is None:
            api_config = chatgpt_3
        self.client = OpenAI(
            base_url=api_config['base_url'],
            api_key=api_config['api_key']
        )
        self.model = api_config['model']
        self.token_nums = 0
        self.ask_num = 0

    def ask(self, prompt,system_role=None):
        response = self.client.chat.completions.create(
            model=self.model,
            messages=[
                {"role": "system", "content": system_role},
                {"role": "user", "content": prompt}
            ],
        # temperature=0.7
        )
        ans = response.choices[0].message.content
        return ans

    def ask_prompt(self, pair, template):
        prompt = template.format(pair[0], pair[1])
        return self.ask(prompt)

prompt = "你需要对输入的文本进行增强，生成#尽可能多的正例和负例#。输出格式严格如下,禁止输出其他内容。" \
         "\n输入：帮我打开网页" \
         "\n输出：['打开网页','打开一个网页','我想看会网页','给我把网页打开']$['刷新网页','把网页关掉','打开屏幕','谁打印了这个网页'，'打开一个没有网页的新桌面']" \
         "\n输入：{}" \
         "\n输出："

commands = [
    "打开我的文档文件夹。",
    "关闭所有正在运行的程序。",
    "打开 Chrome 浏览器并搜索关于人工智能的最新新闻。",
    "将我的个人文件备份到外部硬盘。",
    "关闭电脑。",
    "打开任务管理器并结束名为“chrome.exe”的进程。",
    "调整音量为 50%。",
    "打开控制面板并查看已安装的硬件设备。",
    "打开“我的电脑”，查看硬盘空间使用情况。",
    "播放我收藏的音乐列表。",
    "关闭所有打开的文本编辑器。",
    "退出PDF阅读器应用程序。",
    "终止所有正在运行的下载任务。",
    "结束当前的在线会议。",
    "关闭所有绘图软件窗口。",
    "删除桌面上不再需要的临时文件。",
    "从播放列表中移除不喜欢的歌曲。",
    "退出当前的游戏程序。",
    "关闭不再观看的视频窗口。",
    "删除邮件客户端中的垃圾邮件。",
    "退出即时通讯软件。",
    "清除浏览器的浏览历史。",
    "关闭所有打开的电子表格。",
    "删除不再需要的旧项目文件。",
    "退出正在运行的数据库管理工具。",
    "关闭所有打开的设计软件。",
    "删除重复的照片文件。",
    "退出当前的虚拟机程序。",
    "关闭所有终端窗口。",
    "删除不再使用的应用程序快捷方式。",
    "退出所有打开的代码编辑器。",
    "关闭所有打开的项目管理工具。",
    "删除过时的文档草稿。",
    "退出安全监控软件。",
    "关闭所有打开的分析报告。",
    "删除废弃的日志文件。",
    "退出正在运行的备份程序。",
    "关闭所有打开的音频编辑软件。",
    "删除不再需要的音频样本。",
    "退出正在运行的虚拟私人网络。",
    "关闭所有打开的邮件合并任务。",
    "删除草稿箱中的过期文档。",
    "退出正在运行的远程桌面连接。",
    "关闭所有打开的3D建模软件。",
    "删除不再参考的模型文件。",
    "退出正在运行的统计分析软件。",
    "关闭所有打开的科学计算工具。",
    "删除过时的数据分析结果。",
    "退出正在运行的翻译软件。",
    "关闭所有打开的远程访问工具。",
    "删除不再需要的远程会话记录。",
    "打开系统设置。",
    "进入网络和互联网设置。",
    "调整屏幕亮度至中等。",
    "开启夜间模式。",
    "更新系统语言为中文。",
    "进入声音设置并关闭系统提示音。",
    "在隐私设置中禁用位置跟踪。",
    "打开无障碍选项。",
    "在系统安全设置中启动防火墙。",
    "进入账户设置并更改密码。",
    "在电源选项中设置电脑在10分钟后自动休眠。",
    "进入显示设置并调整屏幕分辨率。",
    "在系统更新设置中检查并安装最新更新。",
    "打开存储设置并运行磁盘清理。",
    "在用户账户控制设置中提高安全级别。",
    "进入鼠标设置并更改指针速度。",
    "在键盘设置中调整按键重复速率。",
    "在系统还原中创建一个新的还原点。",
    "进入系统信息查看硬件资源使用情况。",
    "在设备管理器中更新所有驱动程序。",
    "在系统设置中禁用启动声音。",
    "在系统设置中启用粘滞键功能。",
    "在系统设置中调整时间区域。",
    "在系统设置中设置自动同步时间。",
    "在系统设置中管理启动程序。",
    "在系统设置中配置远程桌面。",
    "在系统设置中设置家长控制。",
    "在系统设置中调整电源和睡眠选项。",
    "在系统设置中配置系统备份计划。",
    "在系统设置中查看最近的系统错误日志。",
    "在系统设置中更改系统主题。",
    "在系统设置中清除DNS缓存。",
    "在系统设置中启用或禁用系统还原。",
    "在系统设置中配置系统维护任务。",
    "在系统设置中调整系统性能选项。",
    "在系统设置中管理系统启动顺序。",
    "在系统设置中更新系统注册表。",
    "在系统设置中配置系统启动项。",
    "在系统设置中查看系统资源监视器。",
    "在系统设置中管理系统服务。",
    "在系统设置中调整系统声音方案。",
    "在系统设置中配置系统同步设置。",
    "在系统设置中更新系统时间。",
    "在系统设置中查看系统用户账户。",
    "在系统设置中管理系统Windows更新。",
    "更改桌面背景为我的个人照片。",
    "将我的个人标志设置为文档的水印。",
    "调整任务栏图标大小为大。",
    "设置开始菜单为全屏显示。",
    "更改系统主题颜色为深蓝。",
    "将我的个人音乐设置为Windows启动音。",
    "在锁屏界面显示我的艺术作品。",
    "设置鼠标指针为自定义图案。",
    "更改系统字体为我喜欢的样式。",
    "将我的个人签名添加到邮件签名中。",
    "在桌面上创建一个名为'个人项目'的新文件夹。",
    "设置我的个人日历视图为每周开始于周日。",
    "将我的个人头像设置为社交媒体账户的头像。",
    "调整系统音量为个人偏好的级别。",
    "在个人日记应用中添加新的条目。",
    "在个人记账软件中记录今天的开销。",
    "更新个人博客的草稿。",
    "在微信中发送消息给张经理。",
    "在QQ邮箱中查看未读邮件。",
    "在钉钉中审批待处理的工作流程。",
    "在企业微信中创建一个新的日程安排。",
    "在百度网盘中上传今天的会议记录。",
    "在腾讯文档中共享我的项目计划。",
    "在有道云笔记中搜索关于'市场分析'的笔记。",
    "在WPS Office中打开我的财务报表。",
    "在支付宝中查看最近的交易记录。",
    "在淘宝中搜索最新的电子产品。",
    "在京东中查看我的订单状态。",
    "在网易云音乐中播放我最爱的歌曲。",
    "在酷狗音乐中下载新专辑。",
    "在喜马拉雅FM中继续听我订阅的有声书。",
    "在抖音中查看我关注的人的最新动态。",
    "在快手中上传我拍摄的短视频。",
    "在哔哩哔哩上观看推荐的视频。",
    "在腾讯视频中搜索热门电视剧。",
    "在爱奇艺上预约即将上映的电影。",
    "在优酷上继续追我的综艺节目。",
    "在搜狐新闻中浏览今日热点新闻。",
    "在今日头条中查看个性化推荐的文章。",
    "在搜狗输入法中调整输入设置。",
    "在高德地图中查找最近的地铁站。",
    "在滴滴出行中叫一辆快车。",
    "在美团中订购外卖。",
    "在大众点评中查看餐厅评价。",
    "在携程旅行中预订下周的酒店。",
    "在去哪儿网中搜索特价机票。",
    "在马蜂窝旅游中查看旅游攻略。",
    "在58同城中发布我的二手物品出售信息。",
    "在豆瓣中查看书籍评分。",
    "在咕咚中记录我的跑步数据。",
    "在Keep中开始新的健身课程。",
    "在沪江英语中学习新的英语课程。",
    "在扇贝单词中复习今天的单词。",
    "在腾讯会议中加入正在进行的视频会议。",
    "在石墨文档中编辑团队项目文档。",
    "在脉脉中查看行业动态。",
    "在猎聘中更新我的简历。"
]



LLMs_api = LLMsAPI('chatgpt_3')
result = []
for i in tqdm(commands):
    answer = LLMs_api.ask(prompt.format(i),system_role='你是一个NLP的专家，请你按照要求完成文本增强任务')
    try:
        pos,neg  = answer.split('$')
        pos = eval(pos)
        pos.append(i)
        neg = eval(neg)
        result.extend([(x, y,1) for x in pos for y in pos if x != y])
        result.extend([(x, y,0) for x in neg for y in pos if x != y])
    except:
        continue
pkl.dump(result,open('./data/result.pkl','wb'))
